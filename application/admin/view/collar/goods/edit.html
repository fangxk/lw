<style>
    #cxselect-example .form-group {
        margin: 10px 0;
    }
    [v-cloak] {display: none;}
    .wanl-specs .add-option{
        width: 250px;
        margin-bottom: 17px;
    }
    .wanl-specs .add-option .input-group-addon{
        color: #fff;
        background-color: #2c3e50;
    }
    .wanl-specs .panel .row{
        margin: 5px 0;
    }
    .wanl-specs .panel .remove {
        display: none;
        position: absolute;
        z-index: 2;
        width: 18px;
        height: 18px;
        font-size: 14px;
        line-height: 16px;
        color: #fff;
        text-align: center;
        cursor: pointer;
        background: rgba(0,0,0,.3);
        border-radius: 50%;
    }
    .wanl-specs .panel .panel-heading {
        position: relative;
    }
    .wanl-specs .panel .panel-heading .remove {
        right: 10px;
        top: 10px;
    }
    .wanl-specs .panel .panel-heading:hover .remove {
        display:block;
    }
    .wanl-specs .panel .wanl-specs-tag{
        background-color: #f8f8f8;
        position: relative;
        padding: 6px 10px;
        display: inline-block;
        margin-right: 10px;
        text-align: center;
        border-radius: 2px;
        cursor: pointer;
    }
    .wanl-specs .panel .wanl-specs-tag .remove {
        top: -5px;
        right: -5px;
    }
    .wanl-specs .panel .wanl-specs-tag:hover .remove{
        display:block;
    }

    .wanl-specs .batch .input-group{
        margin: 15px 0;
        width: 66%;
    }
    .sp_result_area{
        z-index: 10000;
    }
    .form-inline .form-control{
        padding-right: 100px;
    }
    .input-sm{
        padding: 5px 0;
        text-align: center;
    }
    .sp_container {
        margin-right: 3px;
    }
    .panel-intro > .panel-heading {
        position: sticky;
        top: 0;
        z-index: 9999;
    }
    .wanl-attribute {
        display: flex;
        flex-wrap: wrap;
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 3px;
    }
    .wanl-attribute>div{
        width: 50%;
    }
</style>
<form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">

    <!--<div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Weigh')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-weigh" class="form-control" name="row[weigh]" type="number" value="{$row.weigh|htmlentities}">
        </div>
    </div>-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Category_ids')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-category_ids" data-rule="required" data-source="collar/category/index" data-multiple="true" class="form-control selectpage" name="row[category_ids]" type="text" value="{$row.category_ids|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Name')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-name" data-rule="required" class="form-control" name="row[name]" type="text" value="{$row.name|htmlentities}">
        </div>
    </div>
    <!--添加图片-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('商品缩略图')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="input-group">
                <input id="c-image" class="form-control" size="50" name="row[image]" type="text" value="{$row.image|htmlentities}">
                <div class="input-group-addon no-border no-padding">
                    <span><button type="button" id="plupload-image" class="btn btn-danger plupload" data-input-id="c-image" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="false" data-preview-id="p-image"><i class="fa fa-upload"></i> {:__('Upload')}</button></span>
                    <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-input-id="c-image" data-mimetype="image/*" data-multiple="false"><i class="fa fa-list"></i> {:__('Choose')}</button></span>
                </div>
                <span class="msg-box n-right" for="c-image"></span>
            </div>
            <ul class="row list-inline plupload-preview" id="p-image"></ul>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('商品相册')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="input-group">
                <input id="c-images" class="form-control" size="50" name="row[images]" type="text" value="{$row.images|htmlentities}">
                <div class="input-group-addon no-border no-padding">
                    <span><button type="button" id="plupload-images" class="btn btn-danger plupload" data-input-id="c-images" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="false" data-preview-id="p-images"><i class="fa fa-upload"></i> {:__('Upload')}</button></span>
                    <span><button type="button" id="fachoose-images" class="btn btn-primary fachoose" data-input-id="c-images" data-mimetype="image/*" data-multiple="true"><i class="fa fa-list"></i> {:__('Choose')}</button></span>
                </div>
                <span class="msg-box n-right" for="c-images"></span>
            </div>
            <ul class="row list-inline plupload-preview" id="p-images"></ul>
        </div>
    </div>
    <!--添加图片-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Desc')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-desc" data-rule="required" class="form-control" name="row[desc]" type="text" value="{$row.desc|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Goods_status')}:</label>
        <div class="col-xs-12 col-sm-8">
            
            <div class="radio">
            {foreach name="goodsStatusList" item="vo"}
            <label for="row[goods_status]-{$key}"><input id="row[goods_status]-{$key}" name="row[goods_status]" type="radio" value="{$key}" {in name="key" value="$row.goods_status"}checked{/in} /> {$vo}</label> 
            {/foreach}
            </div>

        </div>
    </div>
    <!--启用多规格-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Hasoption')}:</label>
        <div class="col-xs-12 col-sm-8">

            <div class="radio">
                {foreach name="hasoptionList" item="vo"}
                <label for="row[hasoption]-{$key}"><input id="row[hasoption]-{$key}" name="row[hasoption]" type="radio" value="{$key}" {in name="key" value="$row.hasoption"}checked{/in} /> {$vo}</label>
                {/foreach}
            </div>

        </div>
    </div>
    
    <div id="app" v-cloak  {if $row["hasoption"]==0}style="display:none;"{/if}>
        <div class="row" id="sale">
                <label class="control-label col-xs-12 col-sm-2">{:__('自定义规格')}:</label>
                <div class="panel-body">
                    <div class="form-group wanl-specs">
                        <div class="col-xs-12 col-sm-8">
                            <div class="input-group add-option">
                                <input type="text" class="form-control" ref="specs-name" placeholder="多个产品属性以空格隔开">
                                <span class="input-group-addon pointer" @click="spuAdd">新增属性</span>
                            </div>

                            <div class="panel panel-default" v-for="(item, i) in spu" :key="i">
                                <header class="panel-heading">
                                    <b>{{item}}</b>
                                    <span class="remove" title="移除" @click="spuRemove(i)">×</span>
                                </header>
                                <div class="row">
                                    <div class="col-md-5 col-sm-5 col-xs-5">
                                        <div class="input-group">
                                            <input type="text" class="form-control" :ref="'specs-name-' + i" placeholder="多规格以空格隔开">
                                            <span class="input-group-addon pointer" @click="skuAdd(i)"><i class="fa fa-plus"></i></span>
                                        </div>
                                    </div>
                                    <div class="col-md-7 col-sm-7 col-xs-7">
                                        <div class="wanl-specs-tag" v-for="(v, j) in spuItem[i]" :key="j">
                                            {{v}}<span class="remove" title="移除" @click="skuRemove(i, j)">×</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div v-for="itemm in sku">
                                    <input type="hidden" name="row[sku][]" v-model="itemm" />
                                </div>
                                <input type="hidden" name="row[spu]" v-model="spu" />
                                <div v-for="items in spuItem">
                                    <input type="hidden" name="row[spuItem][]" v-model="items" />
                                </div>
                            </div>
                            <div class="row" v-show="sku.length">
                                <div class="col-md-12">
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr class="info text-info">
                                            <th v-for="item in spu"> {{item}} </th>
                                            <th width="80">原价</th>
                                            <th width="80">现价</th>
                                            <th width="80">库存</th>
                                            <th width="83">体积或重量</th>
                                            <th width="80">编码</th>
                                        </tr>
                                        </thead>

                                        <tbody>
                                        <tr v-for="(item, index) in sku" :key="index">
                                            <td v-for="(v, j) in item" :key="j">{{v}}</td>
                                            <td width="80"><input type="number" data-rule="required" name="row[market_price][]" class="input-sm form-control wanl-market_price" :value="skuItem[sku[index]] && skuItem[sku[index]]['market_price']"> </td>
                                            <td width="80"><input type="number" data-rule="required" name="row[prices][]" class="input-sm form-control wanl-price" :value="skuItem[sku[index]] && skuItem[sku[index]]['price']"> </td>
                                            <td width="80"><input type="number" data-rule="required" name="row[stocks][]" class="input-sm form-control wanl-stock" :value="skuItem[sku[index]] && skuItem[sku[index]]['stock']"></td>
                                            <td width="80"><input type="number" name="row[weigh][]" class="input-sm form-control wanl-weigh" :value="skuItem[sku[index]] && skuItem[sku[index]]['weigh']"></td>
                                            <td width="80"><input type="text" name="row[sn][]" class="input-sm form-control wanl-sn" :value="skuItem[sku[index]] && skuItem[sku[index]]['sn']"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div @click="skuBatch()">
                                        <span v-if="batch == 0">
                                            是否要批量设置？
                                        </span>
                                        <span v-else>
                                            取消批量设置？
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="batch" v-show="batch == 1">
                                <div class="input-group">
                                    <div class="input-group-addon">原价 ￥</div>
                                    <input type="number" class="form-control" id="batch-market_price" placeholder="一键设置原价">
                                    <div class="input-group-addon" onclick="batchSet('market_price')">批量设置</div>
                                </div>
                                <div class="input-group">
                                    <div class="input-group-addon">现价 ￥</div>
                                    <input type="number" class="form-control" id="batch-price" placeholder="一键设置现价">
                                    <div class="input-group-addon" onclick="batchSet('price')">批量设置</div>
                                </div>
                                <div class="input-group">
                                    <div class="input-group-addon">库存</div>
                                    <input type="number" class="form-control" id="batch-stock" placeholder="一键设置库存">
                                    <div class="input-group-addon" onclick="batchSet('stock')">批量设置</div>
                                </div>
                                <div class="input-group">
                                    <div class="input-group-addon">重量</div>
                                    <input type="number" class="form-control" id="batch-weigh" placeholder="一键设置重量">
                                    <div class="input-group-addon" onclick="batchSet('weigh')">批量设置</div>
                                </div>
                                <div class="input-group">
                                    <div class="input-group-addon">编码</div>
                                    <input type="text" class="form-control" id="batch-sn" placeholder="一键设置编码">
                                    <div class="input-group-addon" onclick="batchSet('sn')">批量设置</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!--启用多规格-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Price')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-price" data-rule="required" class="form-control" step="0.01" name="row[price]" type="number" value="{$row.price|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Costprice')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-costprice" class="form-control" step="0.01" name="row[costprice]" type="number" value="{$row.costprice|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Productprice')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-productprice" data-rule="required" class="form-control" step="0.01" name="row[productprice]" type="number" value="{$row.productprice|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Sales')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-sales" data-rule="required" class="form-control" name="row[sales]" type="number" value="{$row.sales|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Seller_count')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-seller_count" class="form-control" name="row[seller_count]" type="number" value="{$row.seller_count|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Showsales')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-showsales" data-rule="required" class="form-control" name="row[showsales]" type="number" value="{$row.showsales|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Weight')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-weight" data-rule="required" class="form-control" name="row[weight]" type="number" value="{$row.weight|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Total')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-total" data-rule="required" class="form-control" name="row[total]" type="number" value="{$row.total|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Day_salescount')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-day_salescount" class="form-control" name="row[day_salescount]" type="number" value="{$row.day_salescount|htmlentities}">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Is_index_show')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="radio">
                {foreach name="isIndexShowList" item="vo"}
                <label for="row[is_index_show]-{$key}"><input id="row[is_index_show]-{$key}" name="row[is_index_show]" type="radio" value="{$key}" {in name="key" value="$row.is_index_show"}checked{/in} /> {$vo}</label>
                {/foreach}
            </div>

        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Istop')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="radio">
                {foreach name="istopList" item="vo"}
                <label for="row[istop]-{$key}"><input id="row[istop]-{$key}" name="row[istop]" type="radio" value="{$key}" {in name="key" value="$row.istop"}checked{/in} /> {$vo}</label>
                {/foreach}
            </div>

        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-success btn-embossed disabled">{:__('OK')}</button>
            <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
        </div>
    </div>
</form>
